menuconfig IMU_HUB
    bool "IMU Hub"
    select SENSOR
    select HUB_MANAGER
    help
        启用 OneFramework IMU 中心

if IMU_HUB

choice
    prompt "IMU Device"
    default IMU_HUB_USE_BMI08X
    help
        IMU中心使用的IMU设备

config IMU_HUB_USE_BMI08X
    bool "IMU Hub use BMI08x"
    select BMI08X
    select SENSOR_ASYNC_API
    help
        使用BMI08X作为IMU Hub设备
endchoice

config IMU_HUB_SAMPLING_FREQUENCY
    int "IMU Hub Sampling Frequency (Hz)"
    range 1 2000
    default 10
    depends on IMU_HUB
    help
        设置IMU中心的采样频率（Hz）

menu "RTIO Thread"

config IMU_HUB_RTIO_STACK_SIZE
    int "IMU Hub RTIO线程栈大小"
    range 512 8192
    default 1024
    help
        RTIO完成回调线程的栈大小，数值越大可容纳更多解析逻辑。

config IMU_HUB_RTIO_THREAD_PRIORITY
    int "IMU Hub RTIO线程优先级"
    default 0
    help
        RTIO完成回调线程的优先级，数值越小优先级越高。
        设为0表示自动使用 K_LOWEST_APPLICATION_THREAD_PRIO，避免打断日志线程。

config IMU_HUB_PUBLISH_EVERY_N_FRAME
    int "IMU Hub 数据更新频率"
    default 10
    help
        在硬件采集 [该值] 帧 后更新数据给外部访问，这个值越大，对外部来说，Imu Hub的数据更新频率越慢，CPU占用越小

endmenu

menu "Algorithm"

choice IMU_HUB_RESOLVER
    prompt "IMU Hub 解算器"
    default IMU_HUB_RESOLVER_MAHONY
    help
        IMU Hub 使用的解算器，默认使用Mahony解算器。若设置为IMU_HUB_RESOLVER_NONE则不会进行数据解算，
        只会发布未处理的数据。届时IMUData结构体的定义也将发生变化。

config IMU_HUB_RESOLVER_NONE
    bool "IMU Hub 不使用解算器"
    help
        不使用任何解算器对IMU数据进行解算

config IMU_HUB_RESOLVER_MAHONY
    bool "IMU Hub Mahony解算器"
    help
        使用 Mahony 互补滤波算法对 6-DOF IMU数据进行解算，得出四元数和欧拉角

endchoice

endmenu
module = IMU_HUB
module-str = IMU_HUB
source "subsys/logging/Kconfig.template.log_config"


endif # IMU_HUB