menuconfig PWM_HEATER
    bool "PWM Heater"
    select PWM
    depends on SENSOR
    select SENSOR_ASYNC_API
    help
        启用基于PID控制的PWM加热器驱动，用于控制传感器温度

if PWM_HEATER

config PWM_HEATER_NAME
    string "PWM加热器设备名称"
    default "PWM_HEATER"
    help
        PWM加热器设备的名称

config PWM_HEATER_INIT_PRIORITY
    int "PWM加热器初始化优先级"
    default 90
    help
        PWM加热器设备驱动初始化优先级

config PWM_HEATER_TARGET_TEMP
    int "目标温度(摄氏度x100)"
    default 4500
    help
        目标温度值，单位为摄氏度x100(例如：5000表示50.00°C)

config PWM_HEATER_TEMP_TOLERANCE
    int "温度容差范围(摄氏度x100)"
    default 20
    help
        温度容差范围，单位为摄氏度x100(例如：20表示±0.20°C)

config PWM_HEATER_UPDATE_INTERVAL_MS
    int "PID控制器更新间隔(毫秒)"
    default 500
    help
        PID控制器更新间隔，单位为毫秒

config PWM_HEATER_PID_KP
    int "PID比例系数(x1000)"
    default 5000
    help
        PID控制器比例系数，放大1000倍

config PWM_HEATER_PID_KI
    int "PID积分系数(x1000)"
    default 500
    help
        PID控制器积分系数，放大1000倍

config PWM_HEATER_PID_KD
    int "PID微分系数(x1000)"
    default 100
    help
        PID控制器微分系数，放大1000倍

config PWM_HEATER_MAX_DUTY_CYCLE_PCT
    int "最大占空比(%)"
    range 0 100
    default 100
    help
        PWM最大占空比限制，防止过热

config PWM_HEATER_PID_AUTO_MAX_OUTPUT
    bool "自动将PID最大输出映射到PWM占空比"
    default y
    help
        选择后，PID输出最大值自动等于最大占空比百分比，无需手动换算。

config PWM_HEATER_PID_MAX_OUTPUT
    int "PID最大输出(手动模式)"
    default 1000
    depends on !PWM_HEATER_PID_AUTO_MAX_OUTPUT
    help
        当未启用自动映射时使用，决定PID输出上限的刻度。

config PWM_HEATER_AUTOSTART
    bool "系统初始化时自动启动加热器"
    default y
    help
        选中后，无需在应用中调用 pwm_heater_enable()，驱动会在 SYS_INIT 阶段自动启动。

module = PWM_HEATER
module-str = PWM_HEATER
source "subsys/logging/Kconfig.template.log_config"

endif # PWM_HEATER